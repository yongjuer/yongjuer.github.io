<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="è®°å½•ç”Ÿæ´»ï¼Œåˆ†äº«æŠ€æœ¯ï¼Œåˆ†äº«ç”Ÿæ´»ã€‚">
    <meta name="author" content="å°ä¸¾">
    
    <title>
        
            å…¨é¢ç†è§£ Promise ç³»åˆ—ï¼ˆä¸€)ï¼šPromise åŸºç¡€ |
        
        å°ä¸¾çš„é˜¿å‹’æ³°
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="shortcut icon" href="/images/logo.png">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/font/css/fontawesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/font/css/regular.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/font/css/solid.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/font/css/brands.min.css">
    
        
            
                
<link rel="stylesheet" href="/css/custom.css">

            
        
    
    <script class="keep-theme-configurations">
    const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"yongjuer.site","root":"/","language":"zh-CN","path":"search.xml"}
    KEEP.theme_config = {"base_info":{"primary_color":"rgba(211, 84, 0,1.0)","title":"å°ä¸¾çš„é˜¿å‹’æ³°","author":"å°ä¸¾","avatar":"/images/avatar.png","logo":"/images/avatar.png","favicon":"/images/logo.png"},"menu":{"home":"/ || fa-solid fa-home","archives":"/archives || fa-solid fa-box-archive","tags":"/tags || fa-solid fa-tags","categories":"/categories || fa-solid fa-layer-group","tools":"/tools || fa-solid fa-tools"},"first_screen":{"enable":true,"background_img":"/images/background.jpg","background_img_dark":"/images/background.jpg","description":null,"hitokoto":true},"social_contact":{"enable":false,"links":{"github":null,"weixin":null,"qq":null,"weibo":null,"zhihu":null,"twitter":null,"x":null,"facebook":null,"email":null}},"scroll":{"progress_bar":false,"percent":true,"hide_header":true},"home":{"announcement":null,"category":true,"tag":true,"post_datetime":"created"},"post":{"author_badge":{"enable":true,"level_badge":false,"custom_badge":["ç‚¼æ°”","ç­‘åŸº","ç»“ä¸¹","å…ƒå©´","åŒ–ç¥"]},"word_count":{"wordcount":true,"min2read":true},"datetime_format":"YYYY-MM-DD","copyright_info":true,"share":true,"reward":{"enable":false,"img_link":null,"text":null},"updated_datetime_icon":"fa-solid fa-arrows-rotate","created_datetime_icon":"fa-solid fa-feather"},"code_block":{"tools":{"enable":true,"style":"default"},"highlight_theme":"default"},"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true,"layout":"right"},"website_count":{"busuanzi_count":{"enable":false,"site_uv":false,"site_pv":false,"page_pv":false}},"local_search":{"enable":true,"preload":true},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.21"},"waline":{"server_url":null,"reaction":false,"version":3},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":true},"lazyload":{"enable":true},"cdn":{"enable":true,"provider":"cdnjs"},"pjax":{"enable":true},"footer":{"since":2021,"word_count":false,"site_deploy":{"enable":false,"provider":"github","url":null},"record":{"enable":false,"list":[{"code":null,"link":null}]}},"inject":{"enable":true,"css":[["/css/custom.css"]],"js":[null]},"root":"","source_data":{"tools":[{"category":"èŠå¤© AI","anchorId":"JUU4JTgxJThBJUU1JUE0JUE5JTIwQUk0"},{"name":"ChatGPT","link":"https://chat.openai.com/","description":"OpenAI æ——ä¸‹ AI èŠå¤©å¯¹è¯å·¥å…·","image":"/images/tools/chatgpt.svg"},{"name":"Gemini","link":"https://gemini.google.com/app","description":"Google æ——ä¸‹ AI èŠå¤©å¯¹è¯å·¥å…·","image":"/images/tools/gemini.svg"},{"name":"Copilot","link":"https://copilot.microsoft.com/","description":"å¾®è½¯æ——ä¸‹çš„æ—¥å¸¸ AI åŠ©æ‰‹","image":"/images/tools/copilot.png"},{"name":"æ–‡å¿ƒä¸€è¨€","link":"https://yiyan.baidu.com/","description":"ç™¾åº¦æ——ä¸‹ AI èŠå¤©å¯¹è¯å·¥å…·","image":"/images/tools/wenxinyiyan.png"},{"name":"é€šä¹‰åƒé—®","link":"https://tongyi.aliyun.com/qianwen/","description":"é˜¿é‡Œå·´å·´æ——ä¸‹ AI èŠå¤©å¯¹è¯å·¥å…·","image":"/images/tools/tongyiqianwen.svg"},{"name":"è®¯é£æ˜Ÿç«","link":"https://xinghuo.xfyun.cn/","description":"ç§‘å¤§è®¯é£æ˜Ÿç«è®¤çŸ¥ AI å¤§æ¨¡å‹","image":"/images/tools/xinghuo.svg"},{"category":"ç»˜ç”» AI","anchorId":"JUU3JUJCJTk4JUU3JTk0JUJCJTIwQUk7"},{"name":"Midjourney","link":"https://www.midjourney.com/","description":"AI å›¾åƒå’Œæ’ç”»ç”Ÿæˆå·¥å…·","image":"/images/tools/midjourney.png"},{"name":"Adobe Firefly","link":"https://firefly.adobe.com/","description":"Adobe æ¨å‡ºçš„ AI å›¾åƒç”Ÿæˆå’Œç¼–è¾‘å·¥å…·","image":"/images/tools/adobe-firefly.svg"},{"name":"Stable Diffusion","link":"https://stability.ai/","description":"æœ€å¼ºå¼€æº AI ç»˜ç”»å·¥å…·","image":"/images/tools/stability.png"},{"name":"Microsoft Designer","link":"https://designer.microsoft.com/home","description":"å¾®è½¯æ¨å‡ºçš„åœ¨çº¿è®¾è®¡æµ·æŠ¥å’Œå®£ä¼ å›¾å·¥å…·","image":"/images/tools/microsoft-designer.svg"},{"name":"æ–‡å¿ƒä¸€æ ¼","link":"https://yige.baidu.com/","description":"ç™¾åº¦å‡ºå“çš„ AI ç»˜ç”»å·¥å…·","image":"/images/tools/wenxinyiyan.png"},{"category":"æŠ€æœ¯ç¤¾åŒº","anchorId":"JUU2JThBJTgwJUU2JTlDJUFGJUU3JUE0JUJFJUU1JThDJUJB13"},{"name":"ç¨€åœŸæ˜é‡‘","link":"https://juejin.cn/","description":"ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº","image":"/images/tools/juejin.svg"},{"name":"V2EX","link":"https://www.v2ex.com/","description":"åˆ›æ„å·¥ä½œè€…ä»¬çš„ç¤¾åŒº","image":"/images/tools/v2ex.png"},{"name":"æ€å¦","link":"https://segmentfault.com/","description":"ä¸­å›½é¢†å…ˆçš„å¼€å‘è€…æŠ€æœ¯ç¤¾åŒº","image":"/images/tools/segmentfault.svg"},{"name":"åšå®¢å›­","link":"https://www.cnblogs.com/","description":"å¼€å‘è€…çš„ç½‘ä¸Šå®¶å›­","image":"/images/tools/cnblogs.png"},{"name":"W2Solo","link":"https://w2solo.com/","description":"ä¸­æ–‡ç‹¬ç«‹å¼€å‘è€…ç¤¾åŒº","image":null},{"name":"ç”µé¸­ç¤¾åŒº","link":"https://eleduck.com/","description":"ä¸“æ³¨è¿œç¨‹å·¥ä½œæ‹›è˜äº¤æµ","image":"/images/tools/dianyashequ.png"},{"name":"StackOverflow","link":"https://stackoverflow.com/","description":"å…¨çƒæœ€å¤§çš„æŠ€æœ¯é—®ç­”ç¤¾åŒº","image":"/images/tools/stackoverflow.png"},{"name":"å¼€æºä¸­å›½","link":"https://www.oschina.net/","description":"ç›®å‰å›½å†…æœ€å¤§çš„å¼€æºæŠ€æœ¯ç¤¾åŒº","image":"/images/tools/oschina.webp"},{"name":"InfoQ","link":"https://www.infoq.cn/","description":"ä¸€ä¸ªå®è·µé©±åŠ¨çš„æŠ€æœ¯ç¤¾åŒºèµ„è®¯ç«™ç‚¹","image":"/images/tools/infoq.png"},{"name":"51CTO","link":"https://www.51cto.com/","description":"ä¸­å›½é¢†å…ˆçš„ IT æŠ€æœ¯ç½‘ç«™","image":"/images/tools/51cto.webp"},{"name":"CSDN","link":"https://www.csdn.net/","description":"ä¸­æ–‡æœ€å¤§çš„æŠ€æœ¯ç¤¾åŒº","image":"/images/tools/csdn.png"},{"category":"éƒ¨ç½²æ‰˜ç®¡","anchorId":"JUU5JTgzJUE4JUU3JUJEJUIyJUU2JTg5JTk4JUU3JUFFJUEx25"},{"name":"GitHub Pages","link":"https://pages.github.com/","description":"é€šè¿‡ GitHub æ‰˜ç®¡å’Œå‘å¸ƒçš„å…¬å…±ç½‘é¡µ","image":"/images/tools/github.svg"},{"name":"Vercel","link":"https://vercel.com/","description":"Vercel's Frontend Cloud provides the developer experience and infrastructure to build, scale, and secure a faster, more personalized web.","image":"/images/tools/vercel.svg"},{"name":"Cloudflare Pages","link":"https://developers.cloudflare.com/pages/","description":"Create full-stack applications that are instantly deployed to the Cloudflare global network.","image":"/images/tools/cloudflare.svg"},{"name":"Netlify","link":"https://www.netlify.com/","description":"Netlify is the essential platform for the delivery of exceptional and dynamic web experiences, without limitations.","image":"/images/tools/netlify.svg"},{"name":"Railway","link":"https://railway.app/","description":"Railway is the cloud for building, shipping, and monitoring applications.","image":"/images/tools/railway.svg"},{"name":"Zeabur","link":"https://zeabur.com","description":"Say goodbye to deployment hassles. With Zeabur, bring your coding genius to life swiftly and smoothly.","image":"/images/tools/zeabur.png"}]},"version":"4.2.5"}
    KEEP.language_ago = {"second":"%s ç§’å‰","minute":"%s åˆ†é’Ÿå‰","hour":"%s å°æ—¶å‰","day":"%s å¤©å‰","week":"%s å‘¨å‰","month":"%s ä¸ªæœˆå‰","year":"%s å¹´å‰"}
    KEEP.language_code_block = {"copy":"å¤åˆ¶ä»£ç ","copied":"å·²å¤åˆ¶","fold":"æŠ˜å ä»£ç å—","folded":"å·²æŠ˜å "}
    KEEP.language_copy_copyright = {"copy":"å¤åˆ¶ç‰ˆæƒä¿¡æ¯","copied":"å·²å¤åˆ¶","title":"åŸæ–‡æ ‡é¢˜","author":"åŸæ–‡ä½œè€…","link":"åŸæ–‡é“¾æ¥"}
  </script>
<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="å°ä¸¾çš„é˜¿å‹’æ³°" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <i class="pjax-progress-icon fas fa-circle-notch fa-spin"></i>
    
</div>



<main class="page-container border-box">
    <!-- home first screen  -->
    

    <!-- page content -->
    <div class="page-main-content border-box">
        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="border-box header-content">
        <div class="left flex-start border-box">
            
                <a class="logo-image border-box" href="/">
                    <img src="/images/avatar.png">
                </a>
            
            <a class="site-name border-box" href="/">
               å°ä¸¾çš„é˜¿å‹’æ³°
            </a>
        </div>

        <div class="right border-box">
            <div class="pc border-box">
                <ul class="menu-list border-box">
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-home"></i>
                                
                                é¦–é¡µ
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/archives">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-box-archive"></i>
                                
                                å½’æ¡£
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/tags">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-tags"></i>
                                
                                æ ‡ç­¾
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/categories">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-layer-group"></i>
                                
                                åˆ†ç±»
                                
                            </a>
                            
                        </li>
                    
                        
                        <li class="menu-item flex-start border-box">
                            <a class="menu-text-color border-box" href="/tools">
                                
                                    <i class="menu-text-color menu-icon fa-solid fa-tools"></i>
                                
                                å·¥å…·
                                
                            </a>
                            
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="menu-text-color fas search fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile border-box flex-start">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list border-box">
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-home"></i>
                                </span>
                            
                            é¦–é¡µ
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/archives">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-box-archive"></i>
                                </span>
                            
                            å½’æ¡£
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/tags">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-tags"></i>
                                </span>
                            
                            æ ‡ç­¾
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/categories">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-layer-group"></i>
                                </span>
                            
                            åˆ†ç±»
                        </a>
                        
                    </label>
                    
                </li>
            
                
                <li class="drawer-menu-item border-box not-sub-menu">
                    <label class="drawer-menu-label border-box">
                        <a class="drawer-menu-text-color left-side flex-start border-box" href="/tools">
                            
                                <span class="menu-icon-wrap border-box flex-center">
                                    <i class="drawer-menu-text-color menu-icon fa-solid fa-tools"></i>
                                </span>
                            
                            å·¥å…·
                        </a>
                        
                    </label>
                    
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle border-box">

            <div class="main-content border-box">
                

                    
<div class="fade-in-down-animation">
    <div class="post-page-container border-box">
        <div class="post-content-container border-box">
            
                <div class="post-content-top border-box"
                     style="height: 13.8rem"
                >
                    <div class="cover-post-title">
                        å…¨é¢ç†è§£ Promise ç³»åˆ—ï¼ˆä¸€)ï¼šPromise åŸºç¡€
                    </div>
                    <img class="post-cover" src="/images/posts/promise_js.png"
                         onerror="this.style.display='none'"
                    >
                </div>
            

            <div class="post-content-bottom border-box has-cover">
                

                
                    <div class="post-header border-box">
                        
                            <div class="avatar-box border-box">
                                <img src="/images/avatar.png">
                            </div>
                        
                        <div class="info-box">
                            <div class="author border-box">
                                <span class="name">å°ä¸¾</span>
                                
                                    <span class="author-badge">ç­‘åŸº</span>
                                
                            </div>
                            <div class="meta-info border-box">
                                

<div class="post-meta-info-container border-box post">
    <div class="post-meta-info border-box">
        

        
            <span class="meta-info-item post-create-date">
                <i class="icon fa-solid fa-feather"></i>&nbsp;
                <span class="datetime">2022-04-01</span>
            </span>

            
                <span class="meta-info-item post-update-date">
                    <i class="icon fa-solid fa-arrows-rotate"></i>&nbsp;
                    <span class="datetime" data-updated="Mon Jun 17 2024 05:54:12 GMT+0000">2024-06-17</span>
                </span>
            
        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/JavaScript/">JavaScript</a></li>
                        
                    
                </ul>
            </span>
        

        
            <span class="post-tag meta-info-item border-box">
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/JavaScript/">JavaScript</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Promise/">Promise</a></li>
                        
                    
                </ul>
            </span>
        

        
        
            <span class="meta-info-item post-wordcount">
                <i class="icon fas fa-file-word"></i>&nbsp;<span>5.5k å­—</span>
            </span>
        
        
            <span class="meta-info-item post-min2read">
                <i class="icon fas fa-clock"></i>&nbsp;<span>21 åˆ†é’Ÿ</span>
            </span>
        
        
    </div>

    
</div>

                            </div>
                        </div>
                    </div>
                

                <div class="post-content keep-markdown-body ">
                    

                    
                         <p>è™½ç„¶ Promise é€šå¸¸ä¸å¼‚æ­¥æ“ä½œç›¸å…³ï¼Œä½†ä»–å…¶å®åªæ˜¯å€¼çš„â€œ<strong>ä¸´æ—¶å ä½æœåŠ¡</strong>â€ï¼Œè¯¥å€¼å¯èƒ½æ˜¯å·²çŸ¥çš„æˆ–æ›´å¸¸è§çš„æ˜¯è¯¥å€¼æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œæ‰€æœ‰å‡½æ•°éƒ½å¯ä»¥è¿”å›ä¸€ä¸ª Promise ï¼Œè€Œä¸ç”¨åƒä»¥å‰ä¸€æ ·è®¢é˜…(subscribe)ä¸€ä¸ªäº‹ä»¶æˆ–ä¼ é€’ä¸€ä¸ªå›è°ƒ(callback)ç»™è¯¥å‡½æ•°ã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fetch() æ‰¿è¯ºä¼šåœ¨æœªæ¥çš„æŸä¸ªæ—¶åˆ»è¿”å›</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Promise</span> = <span class="title function_">fetch</span>(<span class="string">&#x27;book.json&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><code>fetch()</code>å‡½æ•°æ˜¯ JavaScript è¿è¡Œç¯å¢ƒä¸­çš„ä¸€ä¸ªå¸¸è§çš„å®ç”¨å‡½æ•°ï¼Œç”¨æ¥å‘å‡ºç½‘ç»œè¯·æ±‚ï¼Œ<code>fetch()</code>å®é™…ä¸Šä¸ä¼šç«‹åˆ»å®Œæˆè¯¥è¯·æ±‚ï¼Œè€Œæ˜¯è¿‡ä¸€ä¼šå„¿æ‰å®Œæˆã€‚å› æ­¤ï¼Œè¯¥å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªä»£è¡¨å¼‚æ­¥æ“ä½œç»“æœçš„ Promise ï¼ˆå¯¹è±¡åœ¨æœ¬åœ°ä¸­è¯¥ Promise å¯¹è±¡å­˜å‚¨åœ¨åä¸º Promise çš„å˜é‡ä¸­ä½†<strong>å…¶å®ä½ å¯ä»¥ä»»æ„å‘½åè¿™ä¸ªå˜é‡</strong>ï¼‰ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨å°†æ¥ä½¿ç”¨å®ƒï¼Œå…·ä½“ä»€ä¹ˆæ—¶å€™èƒ½ä½¿ç”¨è¿™ä¸ªç»“æœï¼Œå®Œå…¨å–å†³äºè¯¥ Promise çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h2 id="1-1-Promise-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#1-1-Promise-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="1.1 Promise çš„ç”Ÿå‘½å‘¨æœŸ"></a>1.1 Promise çš„ç”Ÿå‘½å‘¨æœŸ</h2><p>æ¯ä¸ª Promise éƒ½ä¼šç»å†ä¸€ä¸ªçŸ­æš‚çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™ä¸ªç”Ÿå‘½å‘¨æœŸä»å¾…å®š <code>(pending)</code>çŠ¶æ€å¼€å§‹ï¼Œå¾…å®šçŠ¶æ€è¡¨æ˜è¯¥ Promise è¿˜æ²¡æœ‰å®Œæˆã€‚ä¸€ä¸ªå¤„äºå¾…å®šçŠ¶æ€çš„ Promise è¢«è®¤ä¸ºæ˜¯æœªç¡®å®šçš„ã€‚åœ¨å‰é¢çš„ä¾‹å­ä¸­ Promise åœ¨ <code>fetch()</code> å‡½æ•°è¿”å›æ—¶å°±å¤„äºå¾…å®š<code>(pending)</code>çŠ¶æ€ï¼Œä¸€æ—¦å®Œæˆï¼Œè¯¥ Promise å°±è¢«è§†ä¸ºå·²ç¡®å®šï¼Œå¹¶è¿›å…¥ä»¥ä¸‹ä¸¤ç§å¯èƒ½çš„çŠ¶æ€ä¹‹ä¸€:</p>
<ul>
<li>å±¥è¡Œï¼ˆfulfilledï¼‰çŠ¶æ€ï¼šè¯¥ Promise å·²ç»æˆåŠŸåœ°å®Œæˆäº†å…¶æ‰¿è¯ºï¼Œå¹¶å°†å…¶å€¼ä½œä¸ºç»“æœè¿”å›ã€‚</li>
<li>æ‹’ç»ï¼ˆrejectedï¼‰çŠ¶æ€ï¼šè¯¥ Promise ç”±äºé”™è¯¯æˆ–å…¶ä»–åŸå› æ²¡æœ‰è¢«æˆåŠŸå®Œæˆï¼Œ ä¹Ÿå°±æ˜¯è¢«æ‹’ç»äº†ã€‚</li>
</ul>
<p>å†…éƒ¨å±æ€§<code>[[PromiseState]]</code>å¯ä»¥è¢«è®¾ç½®ä¸º <code>pending</code>ã€<code>fulfilled</code> æˆ– <code>rejected</code>åæ˜  Promise çš„çŠ¶æ€ï¼Œå› ä¸ºè¿™ä¸ªå±æ€§åœ¨ Promise å¯¹è±¡ä¸Šæ˜¯éå…¬å¼€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•é€šè¿‡ç¼–ç¨‹æ¥ç¡®å®š Promise å¤„äºå“ªä¸ªçŠ¶æ€ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥åœ¨ Promise çš„çŠ¶æ€æ”¹å˜æ—¶é€šè¿‡<code>then()</code>æ–¹æ³•æ¥æŒ‡å®šå…·ä½“çš„è¡Œä¸ºã€‚</p>
<h3 id="1-1-1-ç”¨-then-åˆ†é…å¤„ç†å™¨"><a href="#1-1-1-ç”¨-then-åˆ†é…å¤„ç†å™¨" class="headerlink" title="1.1.1 ç”¨ then() åˆ†é…å¤„ç†å™¨"></a>1.1.1 ç”¨ then() åˆ†é…å¤„ç†å™¨</h3><p><code>then()</code>æ–¹æ³•å­˜åœ¨äºæ‰€æœ‰ Promise ä¸­ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“ Promise è¢«å±¥è¡Œæ—¶<code>(fulfilled)</code>è¦è°ƒç”¨çš„å‡½æ•°ï¼Œè¢«ç§°ä¸º<strong>å±¥è¡Œå¤„ç†å™¨</strong>ï¼ˆfulfillment handlerï¼‰ï¼Œä»»ä½•å¼‚æ­¥æ“ä½œè¢«å±¥è¡Œç›¸å…³çš„é¢å¤–æ•°æ®éƒ½ä¼šä½œä¸ºå‚æ•°è¢«ä¼ é€’ç»™è¿™ä¸ªå‡½æ•°ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯å½“ Promise è¢«æ‹’ç»æ—¶<code>(rejected)</code>è¦è°ƒç”¨çš„å‡½æ•°ï¼Œè¢«ç§°ä¸º<strong>æ‹’ç»å¤„ç†å™¨</strong>ï¼ˆrejection handlerï¼‰ï¼Œä»»ä½•ä¸å¼‚æ­¥æ“ä½œè¢«æ‹’ç»ç›¸å…³çš„é”™è¯¯ä¿¡æ¯éƒ½ä¼šä½œä¸ºå‚æ•°è¢«ä¼ é€’ç»™è¿™ä¸ªå‡½æ•°ã€‚</p>
<blockquote>
<p>ğŸ’¡ ä»»ä½•ä»¥ä¸Šè¿°æ–¹å¼å®ç° then() æ–¹æ³•çš„å¯¹è±¡éƒ½è¢«ç§°ä¸º <strong>thenable</strong> å¯¹è±¡ã€‚æ‰€æœ‰ Promise å¯¹è±¡éƒ½æ˜¯ thenableï¼Œä½†å¹¶éæ‰€æœ‰ thenable éƒ½æ˜¯ Promise ã€‚</p>
</blockquote>
<p>å› ä¸º <code>then()</code>çš„ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥é€‰æ‹©æ€§çš„ç›‘å¬å±¥è¡ŒçŠ¶æ€ã€æ‹’ç»çŠ¶æ€æˆ–è€…ä¸¤è€…çš„ä»»æ„ç»„åˆã€‚æ¥çœ‹ä»¥ä¸‹è¿™ç»„ <code>then()çš„</code>è°ƒç”¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ å±¥è¡Œå¤„ç†å™¨å’Œæ‹’ç»å¤„ç†å™¨</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Promise</span> = <span class="title function_">fetch</span>(<span class="string">&#x27;book.json&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">then</span>(</span><br><span class="line">  <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// fulfilled</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Request succeeded with response&#x27;</span>ï¼Œ response.<span class="property">status</span>);</span><br><span class="line">  &#125;ï¼Œ</span><br><span class="line">  (reason) =&gt; &#123;</span><br><span class="line">    <span class="comment">// rejected</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Request failed with error&#x27;</span>ï¼Œ reason.<span class="property">message</span>);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å¦å¤–ä¸€ä¸ªå±¥è¡Œå¤„ç†å™¨</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// fulfilled</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Request succeeded with data&#x27;</span>ï¼Œ response.<span class="property">statusText</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å¦å¤–ä¸€ä¸ªæ‹’ç»å¤„ç†å™¨</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">then</span>(<span class="literal">null</span>ï¼Œ (reason) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Request failed with error&#x27;</span>ï¼Œ reason.<span class="property">message</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>3 ä¸ª <code>then()</code>è°ƒç”¨éƒ½ä½œç”¨äºåŒä¸€ä¸ª Promise å¯¹è±¡ï¼Œç¬¬ä¸€ä¸ª <code>then()</code>è°ƒç”¨åˆ†é…äº†ä¸€ä¸ªå±¥è¡Œå¤„ç†å™¨å’Œä¸€ä¸ªæ‹’ç»å¤„ç†å™¨ï¼Œç¬¬äºŒä¸ª <code>then()</code>è°ƒç”¨åªåˆ†é…äº†ä¸€ä¸ªå±¥è¡Œå¤„ç†å™¨ï¼Œè¯¥å¼‚æ­¥è¯·æ±‚äº§ç”Ÿçš„é”™è¯¯ä¸ä¼šæŠ¥å‘Šç»™ç¨‹åºã€‚ç¬¬ä¸‰ä¸ª <code>then()</code>è°ƒç”¨åªåˆ†é…äº†ä¸€ä¸ªæ‹’ç»å¤„ç†å™¨ï¼Œè¯¥å¼‚æ­¥è¯·æ±‚çš„æˆåŠŸå®Œæˆä¸ä¼šè¢«æŠ¥å‘Šç»™ç¨‹åºã€‚</p>
<blockquote>
<p>âš ï¸ <code>fetch()</code>å‡½æ•°çš„ä¸€ä¸ªå¼‚å¸¸è¡Œä¸ºæ˜¯ï¼šåªè¦å®ƒæ”¶åˆ°ä¸€ä¸ª HTTP çŠ¶æ€ç ï¼Œå“ªæ€•æ˜¯ 404 æˆ–è€… 500ï¼Œè¿”å›çš„ Promise éƒ½ä¼šè¢«è§†ä¸º fulfilledï¼Œå¹¶å°†å“åº”å¯¹è±¡ä½œä¸ºç»“æœè¿”å›ã€‚åªæœ‰å½“ç½‘ç»œè¯·æ±‚å› ä¸ºæŸç§åŸå› å¤±è´¥çš„æ—¶å€™ï¼Œ Promise æ‰ä¼šå¤„äºæ‹’ç»çŠ¶æ€ã€‚å› æ­¤ï¼Œä½ éœ€è¦åœ¨ <code>then()</code>è°ƒç”¨ä¸­æ£€æŸ¥å“åº”å¯¹è±¡çš„çŠ¶æ€ç ï¼Œå·²ç¡®å®šè¯·æ±‚æ˜¯å¦æˆåŠŸï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;book.json&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (response.<span class="property">ok</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Request succeeded.&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Request failed.&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="1-1-2-ç”¨-catch-åˆ†é…æ‹’ç»å¤„ç†å™¨"><a href="#1-1-2-ç”¨-catch-åˆ†é…æ‹’ç»å¤„ç†å™¨" class="headerlink" title="1.1.2 ç”¨ catch() åˆ†é…æ‹’ç»å¤„ç†å™¨"></a>1.1.2 ç”¨ catch() åˆ†é…æ‹’ç»å¤„ç†å™¨</h3><p>Promise è¿˜æœ‰ä¸€ä¸ªåä¸º <code>catch()</code> çš„æ–¹æ³•ã€‚å½“åªä¼ é€’ä¸€ä¸ªæ‹’ç»å¤„ç†å™¨æ—¶ï¼Œå®ƒçš„è¡Œä¸ºä¸ <code>then()</code> ç±»ä¼¼ã€‚æ¯”å¦‚ä¸‹é¢çš„ <code>catch()</code> è°ƒç”¨å’Œ <code>then()</code> è°ƒç”¨åœ¨åŠŸèƒ½ä¸Šæ˜¯ç­‰ä»·çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Promise</span> = <span class="title function_">fetch</span>(<span class="string">&#x27;book.json&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">catch</span>(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// rejected</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Request failed with error&#x27;</span>ï¼Œ reason.<span class="property">message</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">then</span>(<span class="literal">null</span>ï¼Œ (reason) =&gt; &#123;</span><br><span class="line">  <span class="comment">// rejected</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Request failed with error&#x27;</span>ï¼Œ reason.<span class="property">message</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>then()</code> å’Œ <code>catch()</code> çš„æ ¹æœ¬ç›®çš„æ˜¯è®©ä½ æŠŠå®ƒä»¬ç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œä»è€ŒæŒ‡æ˜å¦‚ä½•å¤„ç†ç»“æœã€‚è¿™ä¸ªç»„åˆæ¯”äº‹ä»¶å¤„ç†å™¨å’Œå›è°ƒå‡½æ•°æ›´å¥½ï¼Œå› ä¸ºå®ƒæ¸…æ¥šåœ°å±•ç¤ºäº†æ“ä½œæˆåŠŸä¸å¦ã€‚ï¼ˆäº‹ä»¶å¤„ç†å™¨å¾€å¾€ä¸ä¼šåœ¨å‡ºç°é”™è¯¯æ—¶è¢«è§¦å‘ï¼Œ è€Œæ˜¯åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œä½ å¿…é¡»éšæ—¶è®°å¾—æ£€æŸ¥å¯èƒ½å‡ºç°çš„é”™è¯¯å¹¶æ‰‹åŠ¨å¤„ç†ã€‚ï¼‰ å¦‚æœä½ ä¸ç»™ä¸€ä¸ªè¢«æ‹’ç»çš„ Promise æ·»åŠ æ‹’ç»å¤„ç†å™¨ï¼Œ é‚£ä¹ˆ JavaScript <strong>è¿è¡Œç¯å¢ƒ</strong> ï¼ˆæµè§ˆå™¨æˆ– Nodeï¼‰å°±ä¼šå‘æ§åˆ¶å°è¾“å‡ºä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼Œ æˆ–è€…æŠ›å‡ºä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼Œåˆæˆ–è€…ä¸¤è€…éƒ½æœ‰ï¼ˆå…·ä½“å–å†³äº JavaScript è¿è¡Œç¯å¢ƒï¼‰ã€‚</p>
<h3 id="1-1-3-ç”¨-finally-åˆ†é…è§£å†³å¤„ç†å™¨"><a href="#1-1-3-ç”¨-finally-åˆ†é…è§£å†³å¤„ç†å™¨" class="headerlink" title="1.1.3 ç”¨ finally() åˆ†é…è§£å†³å¤„ç†å™¨"></a>1.1.3 ç”¨ finally() åˆ†é…è§£å†³å¤„ç†å™¨</h3><p>é™¤äº†<code>then()</code>å’Œ<code>catch()</code>ï¼Œ Promise è¿˜æœ‰<code>finally()</code>ï¼Œ æ— è®ºå¼‚æ­¥æ“ä½œæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œåªè¦æ“ä½œå®Œæˆï¼Œ é‚£ä¹ˆä¼ ç»™<code>finally()</code>çš„å›è°ƒå‡½æ•°(è¢«ç§°ä¸º<strong>è§£å†³å¤„ç†å™¨</strong>)å°±ä¼šè¢«è°ƒç”¨ï¼Œ ä¸ä¼ ç»™<code>then()</code>å’Œ<code>catch()</code>çš„å›è°ƒå‡½æ•°ä¸åŒï¼Œ <strong>ä¼ ç»™<code>finally()</code>çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•å‚æ•°</strong>ï¼Œ å› ä¸ºæˆ‘ä»¬ä¸æ¸…æ¥š Promise æ˜¯è¢«å±¥è¡Œäº†è¿˜æ˜¯è¢«æ‹’ç»äº†ï¼Œ å› ä¸ºè§£å†³å¤„ç†å™¨åœ¨ Promise <strong>è¢«å±¥è¡Œå’Œè¢«æ‹’ç»æ—¶éƒ½ä¼šè¢«è°ƒç”¨</strong>ï¼Œ æ‰€ä»¥å®ƒç±»ä¼¼äºä½¿ç”¨<code>then()</code>æ—¶å°†åŒä¸€ä¸ªå‡½æ•°ä¼ é€’ç»™ Promise çš„å±¥è¡Œå¤„ç†å™¨å’Œæ‹’ç»å¤„ç†å™¨ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Promise</span> = <span class="title function_">fetch</span>(<span class="string">&#x27;book.json&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æˆ‘ä»¬ä¸çŸ¥é“ Promise æ˜¯è¢«å±¥è¡Œè¿˜æ˜¯è¢«æ‹’ç»ï¼Œ æ‰€ä»¥æˆ‘ä»¬ä¸æ¥å—ä»»ä½•å‚æ•°</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Request completed.&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»ä¼¼äº</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">callback</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Request completed.&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">then</span>(callbackï¼Œ callback);</span><br></pre></td></tr></table></figure>

<p>åªè¦ä¸è®¿é—®å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œè¿™ä¸¤ä¸ªä¾‹å­æ‰€è¡¨ç°å‡ºçš„è¡Œä¸ºå°±æ˜¯ä¸€è‡´çš„ã€‚ç„¶è€Œï¼Œä¸<code>then()</code>ç›¸æ¯”ï¼Œä½¿ç”¨<code>finally()</code>å¯ä»¥æ›´æ¸…æ™°åœ°è¡¨è¾¾ä½ çš„æ„å›¾ï¼Œè¿™ä¸€ç‚¹å’Œ<code>catch()</code>ä¸€æ ·ã€‚</p>
<p>å½“ä½ å¸Œæœ›çŸ¥é“ä¸€ä¸ªæ“ä½œå·²ç»å®Œæˆï¼Œä½†å¹¶ä¸å…³å¿ƒç»“æœæ—¶ï¼Œè§£å†³å¤„ç†å™¨å¾ˆæœ‰ç”¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä½ æƒ³åœ¨<code>fetch()</code>è¯·æ±‚å¤„äºæ´»è·ƒçŠ¶æ€æ—¶åœ¨ç½‘é¡µä¸Šæ˜¾ç¤ºä¸€ä¸ªåŠ è½½æŒ‡ç¤ºå™¨ï¼Œç„¶ååœ¨<code>fetch()</code>è¯·æ±‚å®Œæˆåéšè—è¯¥åŠ è½½æŒ‡ç¤ºå™¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥è¯·æ±‚æœ¬èº«æ˜¯å¦æˆåŠŸå¹¶ä¸é‡è¦ï¼Œå› ä¸ºä¸€æ—¦è¯·æ±‚å®Œæˆï¼ŒåŠ è½½æŒ‡ç¤ºå™¨å°±åº”è¯¥éšè—ã€‚å¦‚ä¸‹ä»£ç ï¼Œå¯åœ¨ä½ çš„ Web åº”ç”¨ç¨‹åºä¸­æ»¡è¶³ä¸Šè¿°éœ€æ±‚ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> appElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;app&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Promise</span> = <span class="title function_">fetch</span>(<span class="string">&#x27;book.json&#x27;</span>);</span><br><span class="line"></span><br><span class="line">appElement.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;loading&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¤„ç†æˆåŠŸ</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¤„ç†å¤±è´¥</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  appElement.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;loading&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™é‡Œï¼ŒAppElement ä»£è¡¨åœ¨ç½‘é¡µä¸ŠåŒ…è£¹æ•´ä¸ªåº”ç”¨ç¨‹åºçš„ HTML å…ƒç´ ã€‚ä½¿ç”¨<code>fetch()</code>å‘èµ·ä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼Œæ·»åŠ  CSS ç±» loading åˆ°è¯¥ HTML å…ƒç´ ä¸­(è¿™æ ·åšä¾¿å¯ä»¥é€‚å½“åœ°æ”¹å˜è¯¥å…ƒç´ çš„æ ·å¼)ã€‚å½“ç½‘ç»œè¯·æ±‚å®Œæˆåï¼Œ Promise çš„çŠ¶æ€å·²ç¡®å®šï¼Œè§£å†³å¤„ç†å™¨å°†è¯¥ loading ç±»ä» HTML å…ƒç´ ä¸­ç§»é™¤ï¼Œä»¥é‡ç½®åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨<code>then()</code>å’Œ<code>catch()</code>æ¥å“åº”è¯·æ±‚æˆåŠŸå’Œå¤±è´¥çš„ç»“æœï¼Œ è€Œ<code>finally()</code><strong>åªå¤„ç†çŠ¶æ€ä»ä¸ç¡®å®šåˆ°ç¡®å®šçš„å˜æ›´</strong>ã€‚å¦‚æœæ²¡æœ‰<code>finally()</code>ï¼Œä½ å°±éœ€è¦åœ¨å±¥è¡Œå¤„ç†å™¨å’Œæ‹’ç»å¤„ç†å™¨ä¸­éƒ½åˆ é™¤è¯¥ loading ç±»ã€‚</p>
<blockquote>
<p>âš ï¸ æ³¨æ„: é€šè¿‡<code>finally()</code>æ·»åŠ çš„è§£å†³å¤„ç†å™¨å¹¶ä¸èƒ½é¿å…ç”±äºè¯·æ±‚è¢«æ‹’ç»è€Œå‘æ§åˆ¶å°è¾“å‡ºæˆ–æŠ›å‡ºé”™è¯¯ï¼Œ ä½ ä»éœ€è¦æ·»åŠ ä¸€ä¸ªæ‹’ç»å¤„ç†å™¨æ¥é¿å…è¿™ç§æƒ…å†µã€‚</p>
</blockquote>
<h3 id="1-1-4-ä¸ºå·²ç¡®å®šçš„-Promise-åˆ†é…å¤„ç†å™¨"><a href="#1-1-4-ä¸ºå·²ç¡®å®šçš„-Promise-åˆ†é…å¤„ç†å™¨" class="headerlink" title="1.1.4 ä¸ºå·²ç¡®å®šçš„ Promise åˆ†é…å¤„ç†å™¨"></a>1.1.4 ä¸ºå·²ç¡®å®šçš„ Promise åˆ†é…å¤„ç†å™¨</h3><p>å³ä½¿å±¥è¡Œå¤„ç†å™¨ã€æ‹’ç»å¤„ç†å™¨æˆ–è§£å†³å¤„ç†å™¨æ˜¯åœ¨ Promise çŠ¶æ€å·²ç¡®å®šçš„æƒ…å†µä¸‹æ·»åŠ çš„ï¼Œè¯¥å¤„ç†å™¨ä¹Ÿä»ç„¶ä¼šè¢«æ‰§è¡Œã€‚è¿™æ ·ä¸€æ¥ï¼Œä½ ä¾¿å¯ä»¥åœ¨<strong>ä»»ä½•æ—¶å€™</strong>æ·»åŠ æ–°çš„å¤„ç†å™¨å’Œæ‹’ç»å¤„ç†å™¨ï¼Œå¹¶ç¡®ä¿å®ƒä»¬ä¼šè¢«è°ƒç”¨ã€‚æ¥çœ‹ä»¥ä¸‹ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Promise</span> = <span class="title function_">fetch</span>(<span class="string">&#x27;book.json&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸæ¥çš„å±¥è¡Œå¤„ç†å™¨</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Request succeeded&#x27;</span>ï¼Œ response.<span class="property">status</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç°åœ¨å†æ·»åŠ å¦å¤–ä¸€ä¸ªæ–°çš„å±¥è¡Œå¤„ç†å™¨</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Request succeeded&#x27;</span>ï¼Œ response.<span class="property">statusText</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼ŒåŸæ¥çš„å±¥è¡Œå¤„ç†å™¨åœ¨åŒä¸€ä¸ª Promise ä¸Šæ·»åŠ äº†å¦ä¸€ä¸ªæ—…å±¥è¡Œå¤„ç†å™¨ï¼Œæ­¤æ—¶è¯¥ Promise å·²ç»å¤„äºå±¥è¡ŒçŠ¶æ€ï¼Œæ‰€ä»¥æ–°çš„å±¥è¡Œå¤„ç†å™¨è¢«æ·»åŠ åˆ°<strong>å¾®ä»»åŠ¡</strong>ï¼ˆmicrotaskï¼‰çš„é˜Ÿåˆ—ä¸­ï¼Œå¹¶åœ¨å°±ç»ªæ—¶è¢«è°ƒç”¨ã€‚æ‹’ç»å¤„ç†å™¨å’Œè§£å†³å¤„ç†å™¨çš„å·¥ä½œæ–¹å¼ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>
<h3 id="1-1-5-å¤„ç†å™¨å’Œå¾®ä»»åŠ¡"><a href="#1-1-5-å¤„ç†å™¨å’Œå¾®ä»»åŠ¡" class="headerlink" title="1.1.5 å¤„ç†å™¨å’Œå¾®ä»»åŠ¡"></a>1.1.5 å¤„ç†å™¨å’Œå¾®ä»»åŠ¡</h3><p>åœ¨å¸¸è§„çš„ç¨‹åºæ‰§è¡Œæµç¨‹ä¸­ï¼ŒJavaScript ä»£ç æ˜¯è¢«å½“ä½œä¸€ä¸ª<strong>ä»»åŠ¡</strong>æ¥æ‰§è¡Œçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒJavaScript ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œç¯å¢ƒï¼Œå½»åº•çš„æ‰§è¡Œä»£ç ï¼Œå¹¶åœ¨å®Œæˆåé€€å‡ºã€‚æ¯”å¦‚ï¼Œç½‘é¡µä¸­çš„ä¸€ä¸ªæŒ‰é’®å¯¹åº”çš„<code>onclick</code>å¤„ç†å™¨è¢«å½“ä½œä¸€ä¸ªä»»åŠ¡æ¥æ‰§è¡Œã€‚å½“è¯¥æŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼ŒJavaScript ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡ï¼Œå¹¶æ‰§è¡Œ<code>onclick</code>å¤„ç†å™¨ã€‚ä¸€æ—¦æ‰§è¡Œå®Œæˆï¼ŒJavaScript å°±ä¼šåŸåœ°å¾…å‘½ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡ç”¨æˆ·äº¤äº’æ¥æ‰§è¡Œæ›´å¤šçš„ä»£ç ã€‚ç„¶è€Œï¼Œ Promise çš„å¤„ç†å™¨åˆ™æ˜¯ä»¥ä¸€ç§ä¸åŒçš„æ–¹å¼æ¥æ‰§è¡Œçš„ã€‚</p>
<p>æ‰€æœ‰çš„ Promise å¤„ç†å™¨ï¼Œæ— è®ºæ˜¯å±¥è¡Œå¤„ç†å™¨ï¼Œæ‹’ç»å¤„ç†å™¨ï¼Œè¿˜æ˜¯è§£å†³å¤„ç†å™¨ï¼Œéƒ½è¢«ä½œä¸º<strong>JavaScript å¼•æ“</strong>å†…éƒ¨çš„å¾®ä»»åŠ¡æ‰§è¡Œã€‚å¾®ä»»åŠ¡è¢«æ’åœ¨å¯¹åˆ—ä¸­ï¼ŒJavaScript ä¼šåœ¨æ‰§è¡Œå®Œå½“å‰ä»»åŠ¡åç«‹å³æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚å½“ Promise çš„çŠ¶æ€ç¡®å®šåï¼Œå¯¹<code>then()</code>ï¼Œ<code>catch()</code>å’Œ<code>finally()</code>çš„è°ƒç”¨<strong>ä¼šå°†æŒ‡å®šçš„å¤„ç†å™¨æ’åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—ä¹‹ä¸­</strong>ã€‚è¿™ä¸é€šè¿‡ <code>setTimeout</code> æˆ– <code>setInterval</code> åˆ›å»ºå®šæ—¶å™¨ä¸åŒï¼Œè¿™ä¸¤ä¸ªå‡½æ•°æ‰€åˆ›å»ºçš„æ–°ä»»åŠ¡ä¼šåœ¨ä¹‹åæŸä¸ªæ—¶åˆ»æ‰§è¡Œã€‚åœ¨å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ Promise å¤„ç†å™¨åˆ™ä¸€å®šä¼šåœ¨åŒä¸€ä»£ç è„šæœ¬ä»»åŠ¡ä¸­æ’é˜Ÿçš„å®šæ—¶å™¨<strong>ä¹‹å‰</strong>æ‰§è¡Œã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨å…¨å±€çš„ queenMicroTask å‡½æ•°æ¥æµ‹è¯•è¿™ä¸€ç‚¹ã€‚è¯¥å‡½æ•°å¯ç”¨äºåœ¨æ—  Promise çš„æƒ…å†µä¸‹åˆ›å»ºå¾®ä»»åŠ¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Timer task&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">queueMicrotask</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Microtask task in timer&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;ï¼Œ <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">queueMicrotask</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Microtask&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä»£ç åˆ›å»ºäº†ä¸€ä¸ªå»¶è¿Ÿä¸º 0 æ¯«ç§’çš„å®šæ—¶å™¨ï¼Œå¹¶åœ¨è¯¥å®šæ—¶å™¨ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¾®ä»»åŠ¡ã€‚æ­¤å¤–ï¼Œè¿™æ®µä»£ç è¿˜åœ¨å®šæ—¶å™¨ä»¥å¤–åˆ›å»ºäº†ä¸€ä¸ªå¾®ä»»åŠ¡ã€‚å½“è¿™æ®µä»£ç æ‰§è¡Œæ—¶ï¼Œä½ ä¼šåœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºå†…å®¹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;Microtask&#x27;</span>;</span><br><span class="line"><span class="string">&#x27;Timer task&#x27;</span>;</span><br><span class="line"><span class="string">&#x27;Microtask task in timer&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>å°½ç®¡å®šæ—¶å™¨çš„å»¶è¿Ÿè¢«è®¾ç½®ä¸º 0 æ¯«ç§’ï¼Œ<strong>ä½†å¾®ä»»åŠ¡è¿˜æ˜¯å…ˆäºå®šæ—¶å™¨æ‰§è¡Œ</strong>ï¼Œå…¶æ¬¡æ˜¯å®šæ—¶å™¨ï¼Œæœ€åæ‰æ˜¯å®šæ—¶å™¨å†…çš„å¾®ä»»åŠ¡ã€‚<strong>å…³äºå¾®ä»»åŠ¡(åŒ…æ‹¬æ‰€æœ‰çš„ Promise å¤„ç†å™¨)ï¼Œæœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒä»¬ä¼šåœ¨ä¸»ä»»åŠ¡å®Œæˆåç«‹å³æ‰§è¡Œã€‚</strong> è¿™æœ€å¤§é™åº¦åœ°ç¼©çŸ­äº†è§£å†³ Promise å’Œå¯¹è§£å†³æœ¬èº«ä½œå‡ºååº”ä¹‹é—´çš„æ—¶é—´é—´éš”ï¼Œä»è€Œä½¿ Promise é€‚ç”¨äºå¯¹è¿è¡Œæ—¶æ•ˆæœ‰æ‰€è¦æ±‚çš„æƒ…å†µã€‚</p>
<h2 id="1-2-åˆ›å»ºæœªè§£å†³çš„-Promise"><a href="#1-2-åˆ›å»ºæœªè§£å†³çš„-Promise" class="headerlink" title="1.2 åˆ›å»ºæœªè§£å†³çš„ Promise"></a>1.2 åˆ›å»ºæœªè§£å†³çš„ Promise</h2><p>æ–°çš„ Promise ç”± Promise å¯¹è±¡çš„æ„é€ å‡½æ•°æ¥åˆ›å»ºã€‚è¿™ä¸ªæ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªè¢«ç§°ä¸º<strong>æ‰§è¡Œå™¨</strong> (executor) çš„å‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¯¥æ‰§è¡Œå™¨åŒ…å«åˆå§‹åŒ– Promise æ‰€éœ€è¦çš„ä»£ç ã€‚æ‰§è¡Œå™¨æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œæ˜¯åˆ†åˆ«åä¸º <code>resolve</code> å’Œ <code>reject</code> å‡½æ•°ã€‚å½“æ‰§è¡Œå™¨å®Œæˆä»¥åï¼Œè°ƒç”¨ <code>resolve()</code> å‡½æ•°ä»¥è¡¨ç¤º Promise æ“ä½œæˆåŠŸå®Œæˆã€‚å½“æ‰§è¡Œå™¨æ“ä½œå¤±è´¥æ—¶ï¼Œåˆ™è°ƒç”¨ <code>reject()</code> å‡½æ•°ä»¥ç¤º Promise æ“ä½œå¤±è´¥ã€‚<br>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨æ—§çš„ XMLHttpRequest æµè§ˆå™¨<strong>åº”ç”¨ç¨‹åºæ¥å£</strong>çš„ä¾‹å­:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">requestURL</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ†é…äº‹ä»¶å¤„ç†å™¨</span></span><br><span class="line">    xhr.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(&#123;</span><br><span class="line">        <span class="attr">status</span>: xhr.<span class="property">status</span>,</span><br><span class="line">        <span class="attr">text</span>: xhr.<span class="property">responseText</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    xhr.<span class="title function_">addEventListener</span>(<span class="string">&#x27;error&#x27;</span>, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">reject</span>(error);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘å‡ºè¯·æ±‚</span></span><br><span class="line">    xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, url);</span><br><span class="line">    xhr.<span class="title function_">send</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Promise</span> = <span class="title function_">requestURL</span>(<span class="string">&#x27;book.json&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬å±¥è¡Œå’Œæ‹’ç»çš„çŠ¶æ€</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">then</span>(</span><br><span class="line">  <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å±¥è¡Œ</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">status</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ‹’ç»</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reason.<span class="property">message</span>);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒXMLHttpRequest çš„è°ƒç”¨è¢«åŒ…è£¹åœ¨ä¸€ä¸ª Promise ä¸­ã€‚<code>load</code> äº‹ä»¶è¡¨æ˜è¯¥è¯·æ±‚å·²ç»æˆåŠŸå®Œæˆï¼Œå› æ­¤ Promise æ‰§è¡Œå™¨åœ¨äº‹ä»¶å¤„ç†å™¨ä¸­è°ƒç”¨äº† <code>resolve()</code>ã€‚ä¸ä¹‹ç±»ä¼¼ï¼Œ<code>error</code> äº‹ä»¶åˆ™è¡¨æ˜è¯¥è¯·æ±‚æ— æ³•é¡ºåˆ©å®Œæˆï¼Œå› æ­¤ Promise æ‰§è¡Œå™¨åœ¨è¯¥äº‹ä»¶å¤„ç†å™¨ä¸­è°ƒç”¨äº† <code>reject</code>ã€‚ä½ å¯ä»¥é€šè¿‡é‡å¤è¿™ä¸ªè¿‡ç¨‹æ¥å°†åŸºäºäº‹ä»¶çš„åŠŸèƒ½è½¬æ¢ä¸ºåŸºäº Promise çš„åŠŸèƒ½ã€‚</p>
<p><strong>æ‰§è¡Œå™¨çš„é‡è¦æ€§åœ¨äºå®ƒåœ¨åˆ›å»º Promise æ—¶ä¼šç«‹å³è¿è¡Œ</strong>ã€‚åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»º xhr å¯¹è±¡ï¼Œåˆ†é…äº‹ä»¶å¤„ç†å™¨ï¼Œå¹¶åœ¨ Promise ä» <code>requestURL()</code> è¿”å›ä¹‹å‰å¯åŠ¨è°ƒç”¨ã€‚å½“æ‰§è¡Œå™¨è°ƒç”¨ <code>resolve()</code> æˆ– <code>reject()</code> æ—¶ï¼Œ Promise çš„çŠ¶æ€å’Œå€¼è¢«<strong>ç«‹å³</strong>è®¾ç½®ï¼Œä½†<strong>æ‰€æœ‰ Promise å¤„ç†å™¨ä½œä¸ºå¾®ä»»åŠ¡å°†æš‚æ—¶ä¸ä¼šæ‰§è¡Œ</strong>ï¼Œç›´åˆ°å½“å‰çš„è„šæœ¬å·¥ä½œå®Œæˆã€‚å‡å¦‚ä½ åœ¨æ‰§è¡Œå™¨å†…éƒ¨ç«‹å³è°ƒç”¨ <code>resolve()</code>ï¼Œè¯•æƒ³ä¼šå‘ç”Ÿä»€ä¹ˆ?</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Promise</span> = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Executor&#x27;</span>);</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="number">42</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;End of script&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Promise ï¼Œå¹¶ç«‹å³è°ƒç”¨äº† <code>resolve()</code> å‡½æ•°ï¼Œ Promise è¢«ç«‹å³è§£å†³ï¼Œæ²¡æœ‰ä»»ä½•å»¶è¿Ÿã€‚ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡ <code>then()</code> æ·»åŠ äº†ä¸€ä¸ªå±¥è¡Œå¤„ç†å™¨æ¥è¾“å‡ºæ“ä½œç»“æœã€‚è™½ç„¶åœ¨æ·»åŠ å¤„ç†å™¨çš„æ—¶å€™ï¼Œè¯¥ Promise å·²ç»è¢«è§£å†³ï¼Œä½†æ˜¯è¾“å‡ºç»“æœä»ç„¶å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;Executor&#x27;</span>;</span><br><span class="line"><span class="string">&#x27;End of script&#x27;</span>;</span><br><span class="line"><span class="number">42</span>;</span><br></pre></td></tr></table></figure>

<p>è¿™è¯´æ˜ï¼Œ Promise çš„æ‰§è¡Œå™¨é¦–å…ˆåŒæ­¥è¿è¡Œå¹¶å°† â€œExecutorâ€ æ‰“å°åˆ°æ§åˆ¶å°ä¸­ã€‚æ¥ç€ï¼Œå±¥è¡Œå¤„ç†å™¨è¢«æ·»åŠ ï¼Œ<strong>ä½†æ˜¯ä¸ä¼šç«‹å³æ‰§è¡Œ</strong>ã€‚è¿™æ®µä»£ç ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¾®ä»»åŠ¡ï¼Œå®ƒå°†åœ¨å½“å‰è„šæœ¬å·¥ä½œå®Œæˆä¹‹åè¢«æ‰§è¡Œã€‚è¿™æ„å‘³ç€ <code>console.log(&#39;End of script&#39;)</code>è¿™å¥ä»£ç ä¼šåœ¨æ‰§è¡Œå±¥è¡Œå¤„ç†å™¨ä¹‹å‰è¢«æ‰§è¡Œï¼Œåœ¨å½“å‰è„šæœ¬çš„å…¶ä»–éƒ¨åˆ†å®Œæˆåæ‰è¾“å‡º 42ã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>ä¸€ä¸ª Promise åªèƒ½è¢«è§£å†³ä¸€æ¬¡</strong>ã€‚å¦‚æœä½ åœ¨ä¸€ä¸ªæ‰§è¡Œå™¨ä¸­å¤šæ¬¡è°ƒç”¨ <code>resolve()</code>ï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡è°ƒç”¨ä¹‹åçš„æ¯ä¸€æ¬¡è°ƒç”¨éƒ½ä¼šè¢«å¿½ç•¥ã€‚</p>
</blockquote>
<p><strong>æ‰§è¡Œå™¨é”™è¯¯</strong>ï¼šå¦‚æœæ‰§è¡Œå™¨æŠ›å‡ºé”™è¯¯ï¼Œé‚£ä¹ˆ Promise çš„æ‹’ç»å¤„ç†å™¨å°±ä¼šè¢«è°ƒç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Promise</span> = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Something went wrong&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(error.<span class="property">message</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæ‰§è¡Œå™¨æ•…æ„æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚<strong>æ¯ä¸ªæ‰§è¡Œå™¨å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªéšå¼çš„ <code>try-catch</code> å—</strong>ï¼Œå¦‚æœæ‰§è¡Œå™¨æŠ›å‡ºé”™è¯¯ï¼Œé‚£ä¹ˆè¯¥é”™è¯¯ä¼šè¢«æ•è·å¹¶äº¤ç»™æ‹’ç»å¤„ç†å™¨å¤„ç†ã€‚å‰é¢çš„ä¾‹å­å’Œå¦‚ä¸‹çš„ä¾‹å­æ•ˆæœç›¸åŒï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Promise</span> = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Something went wrong&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>æ‰§è¡Œå™¨å¯ä»¥æ•è·ä»»ä½•è¢«æŠ›å‡ºçš„é”™è¯¯</strong>ï¼Œä»è€Œç®€åŒ–è¿™ç§å¸¸è§çš„æƒ…å†µçš„å¤„ç†æµç¨‹ã€‚å¦‚æœæ²¡æœ‰åˆ†é…æ‹’ç»å¤„ç†å™¨ï¼ŒJavaScript å¼•æ“å°±ä¼šæŠ›å‡ºé”™è¯¯å¹¶åœæ­¢è¿è¡Œå½“å‰ç¨‹åºã€‚</p>
<h2 id="1-3-åˆ›å»ºå·²è§£å†³çš„-Promise"><a href="#1-3-åˆ›å»ºå·²è§£å†³çš„-Promise" class="headerlink" title="1.3 åˆ›å»ºå·²è§£å†³çš„ Promise"></a>1.3 åˆ›å»ºå·²è§£å†³çš„ Promise</h2><p>ç”±äº Promise æ‰§è¡Œå™¨çš„è¡Œä¸ºæ˜¯åŠ¨æ€çš„ï¼Œå› æ­¤ Promise å¯¹è±¡çš„æ„é€ å‡½æ•°æ˜¯åˆ›å»º<strong>æœªè§£å†³çš„ Promise</strong>çš„æœ€ä½³å·¥å…·ã€‚ä¸è¿‡ï¼Œå¦‚æœæƒ³è®© Promise è¡¨ç¤ºå…ˆå‰å·²ç»è®¡ç®—å‡ºçš„å€¼ï¼Œé‚£ä¹ˆä»…ä»…åˆ›å»ºä¸€ä¸ªå°†å€¼ä¼ é€’ç»™ <code>resolve()</code> æˆ– <code>reject()</code> çš„æ‰§è¡Œå™¨å˜æ²¡æœ‰ä»€ä¹ˆå®é™…æ„ä¹‰ã€‚æœ‰ä¸¤ä¸ªæ–¹æ³•å¯ä»¥æ ¹æ®ç¡®å®šçš„å€¼æ¥åˆ›å»ºå·²è§£å†³çš„ Promiseã€‚</p>
<h3 id="1-3-1-ä½¿ç”¨-Promise-resolve"><a href="#1-3-1-ä½¿ç”¨-Promise-resolve" class="headerlink" title="1.3.1 ä½¿ç”¨ Promise.resolve()"></a>1.3.1 ä½¿ç”¨ Promise.resolve()</h3><p><code>Promise.resolve()</code>æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°å¹¶è¿”å›ä¸€ä¸ªå¤„äºå±¥è¡ŒçŠ¶æ€çš„ Promise ã€‚è¿™æ„å‘³ç€å¦‚æœä½ å·²ç»çŸ¥é“äº† Promise çš„å€¼ï¼Œå°±ä¸å¿…å†æä¾›æ‰§è¡Œå™¨ã€‚æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªä¾‹å­:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">42</span>);</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// 42</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>è‡ªå¸¦ä»£ç åˆ›å»ºäº†ä¸€ä¸ªå·²å±¥è¡Œçš„ Promise ï¼Œå› æ­¤å±¥è¡Œå¤„ç†å™¨ä¼šæ”¶åˆ° 42 è¿™ä¸ªå€¼ã€‚å’Œæœ¬ç« ä¸­çš„å…¶ä»–ä¾‹å­ä¸€æ ·ï¼Œå±¥è¡Œå¤„ç†å™¨åœ¨å½“å‰è„šæœ¬å·¥ä½œå®Œæˆåä½œä¸ºä¸€ä¸ªå¾®ä»»åŠ¡æ‰§è¡Œã€‚å¦‚æœç»™è¿™ä¸ª Promise æ·»åŠ äº†æ‹’ç»å¤„ç†å™¨ï¼Œé‚£ä¹ˆæ‹’ç»å¤„ç†å™¨å°†æ°¸è¿œä¸ä¼šè¢«è°ƒç”¨ï¼Œå› ä¸ºè¿™ä¸ª Promise æ°¸è¿œä¸ä¼šå¤„äºæ‹’ç»çŠ¶æ€ã€‚</p>
<p>å¦‚æœä½ æŠŠä¸€ä¸ª Promise ä¼ é€’ç»™<code>Promise.resolve()</code>ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•å°±ä¼šè¿”å›ä½ ä¼ é€’çš„é‚£ä¸ª Promise å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">42</span>);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(promise1);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(promise1 === promise2); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-2-ä½¿ç”¨-Promise-reject"><a href="#1-3-2-ä½¿ç”¨-Promise-reject" class="headerlink" title="1.3.2 ä½¿ç”¨ Promise.reject()"></a>1.3.2 ä½¿ç”¨ Promise.reject()</h3><p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨<code>Promise.reject()</code>æ¥åˆ›å»ºå¤„äºæ‹’ç»çŠ¶æ€çš„ Promise å¯¹è±¡ã€‚è¿™ä¸<code>Promise.resolve()</code>çš„å·¥ä½œåŸç†ç±»ä¼¼ï¼Œåªä¸è¿‡åˆ›å»ºçš„ Promise æ˜¯å¤„äºæ‹’ç»çŠ¶æ€çš„ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="number">42</span>);</span><br><span class="line">promise.<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(error); <span class="comment">// 42</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ çš„è¯¥ Promise ä¸­çš„ä»»ä½•é¢å¤–çš„æ‹’ç»å¤„ç†å™¨éƒ½ä¼šè¢«è°ƒç”¨ï¼Œä½†å±¥è¡Œå¤„ç†å™¨ä¸ä¼šè¢«è°ƒç”¨ï¼Œå› ä¸ºè¯¥ Promise æ°¸è¿œä¸ä¼šå¤„äºå±¥è¡ŒçŠ¶æ€ã€‚</p>
<h3 id="1-3-3-é-Promise-çš„-thenable-å¯¹è±¡"><a href="#1-3-3-é-Promise-çš„-thenable-å¯¹è±¡" class="headerlink" title="1.3.3 é Promise çš„ thenable å¯¹è±¡"></a>1.3.3 é Promise çš„ thenable å¯¹è±¡</h3><p><code>Promise.resolve()</code>å’Œ<code>Promise.reject()</code>ä¹Ÿæ¥å—é Promise çš„ thenable å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚å½“ä¼ é€’ä¸€ä¸ªé Promise çš„ thenable å¯¹è±¡æ—¶ï¼Œè¿™äº›æ–¹æ³•ä¼šåŸºäºè¯¥ thenable å¯¹è±¡å·²ç¡®å®šçš„å€¼å’ŒçŠ¶æ€ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ã€‚</p>
<p>å½“ä¸€ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ª <code>then()</code> æ–¹æ³•ï¼Œå¹¶ä¸”å¯æ¥å‚æ•° resolve å‡½æ•°å’Œ reject å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªé Promise çš„ thenable å¯¹è±¡ï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> thenable = &#123;</span><br><span class="line">  <span class="attr">then</span>: <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="number">42</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>é™¤äº† <code>then()</code> æ–¹æ³•,è¿™ä¸ªä¾‹å­ä¸­çš„ thenable å¯¹è±¡æ²¡æœ‰å…¶ä»–ä¸ Promise å¯¹è±¡ç›¸å…³è”çš„ç‰¹å¾ã€‚ä½ å¯ä»¥é€šè¿‡è°ƒç”¨<code>Promise.resolve()</code>æ¥å°† thenable å¯¹è±¡è½¬æ¢ä¸ºå¤„äºå±¥è¡ŒçŠ¶æ€çš„ Promise å¯¹è±¡:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> thenable = &#123;</span><br><span class="line">  <span class="attr">then</span>: <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="number">42</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(thenable);</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// 42</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>Promise.resolve()</code>é€šè¿‡è°ƒç”¨ <code>thenable.then()</code> æ¥ç¡®å®šè¯¥ Promise çš„çŠ¶æ€ï¼Œå› ä¸ºåœ¨ <code>then()</code> æ–¹æ³•ä¸­è°ƒç”¨äº† <code>resolve(42)</code>ï¼Œæ‰€ä»¥ thenable çš„ Promise å¯¹è±¡å¤„äºå±¥è¡ŒçŠ¶æ€ã€‚å› æ­¤ï¼Œä»¥ä¸Šä»£ç åˆ›å»ºäº†ä¸€ä¸ªå¤„äºå±¥è¡ŒçŠ¶æ€çš„ Promise å¯¹è±¡ï¼Œåä¸º promiseã€‚è¯¥ Promise å¯¹è±¡çš„å±¥è¡Œå¤„ç†å™¨æ¥æ”¶æ¥è‡ª thenable å¯¹è±¡çš„ 42ï¼Œä½œä¸ºå…¶å€¼ã€‚</p>
<p>åŒç†ï¼Œå¯ä»¥ç”¨<code>Promise.resolve()</code>æ¥ä» thenable åˆ›å»ºä¸€ä¸ªå¤„äºæ‹’ç»çŠ¶æ€çš„ Promise ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> thenable = &#123;</span><br><span class="line">  <span class="attr">then</span>: <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">reject</span>(<span class="number">42</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(thenable);</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">catch</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// 42</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¾‹å­ä¸ä¸Šä¸€ä¸ªä¾‹å­ç›¸ä¼¼ï¼Œåªä¸è¿‡ thenable å¯¹è±¡å¤„äºæ‹’ç»çŠ¶æ€ã€‚å½“ <code>thenable.then()</code> æ‰§è¡Œæ—¶ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªå¤„äºæ‹’ç»çŠ¶æ€çš„ Promise å¯¹è±¡ï¼Œå…¶å€¼ä¸º 42ï¼Œè¿™ä¸ªå€¼ä¼šè¢«ä¼ é€’ç»™ Promise çš„æ‹’ç»å¤„ç†å™¨ã€‚</p>
<p><code>Promise.resolve()</code> å’Œ <code>Promise.reject()</code>çš„è¿™ç§åŠŸèƒ½ä½¿å¾—å®ƒä»¬æˆä¸ºå¤„ç†é Promise å€¼å’Œ thenable å¯¹è±¡çš„æœ‰ç”¨å·¥å…·ã€‚åœ¨ 2015 å¹´ ECMAScript å¼•å…¥ Promise ä¹‹å‰ï¼Œå¾ˆå¤šåº“ä½¿ç”¨ thenable å¯¹è±¡ã€‚ å› æ­¤ï¼Œ èƒ½å¤Ÿå°† thenable å¯¹è±¡è½¬æ¢ä¸º Promise å¯¹è±¡å¯¹äºå…¼å®¹ä¹‹å‰çš„åº“æ¥è¯´éå¸¸é‡è¦ã€‚</p>
<p>å½“ä½ ä¸ç¡®å®šä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ª Promise æ—¶ï¼Œé€šè¿‡ <code>Promise.resolve()</code> æˆ– <code>Promise.reject()</code> ä¼ é€’è¯¥å¯¹è±¡æ˜¯æ‰¾å‡ºç­”æ¡ˆçš„æœ€ä½³æ–¹æ³•ï¼Œå› ä¸º Promise åªä¼šè¢«åŸæ ·ä¼ å›ã€‚</p>
<h2 id="1-4-å°ç»“"><a href="#1-4-å°ç»“" class="headerlink" title="1.4 å°ç»“"></a>1.4 å°ç»“</h2><ul>
<li>Promise æ˜¯å€¼çš„â€<strong>ä¸´æ—¶ç«™ä½ç¬¦</strong>â€œï¼Œè¿™ä¸ªå€¼å°†åœ¨ä»¥åæŸä¸ªæ—¶é—´ç‚¹ä½œä¸ºæŸä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœæ¥æä¾›ç»™å½“å‰ç¨‹åºã€‚ ä½ å¯ä»¥ä½¿ç”¨ Promise æ¥è¡¨ç¤ºæ“ä½œçš„ç»“æœï¼Œè€Œæ— éœ€ä½¿ç”¨äº‹ä»¶å¤„ç†å™¨æˆ–å›è°ƒå‡½æ•°ã€‚</li>
<li>Promise æœ‰ä¸‰ç§çŠ¶æ€ï¼šå¾…å®š<code>(pending)</code>ã€å±¥è¡Œ<code>(fulfilled)</code>å’Œæ‹’ç»<code>(rejected)</code>ã€‚ä¸€ä¸ª Promise ä»å¾…å®šçŠ¶æ€(æœªç¡®å®šçš„çŠ¶æ€)å¼€å§‹ï¼Œåœ¨æˆåŠŸæ‰§è¡Œæ—¶è¿›å…¥å±¥è¡ŒçŠ¶æ€ï¼Œåœ¨å¤±è´¥æ—¶è¿›å…¥æ‹’ç»çŠ¶æ€ã€‚ï¼ˆå±¥è¡ŒçŠ¶æ€å’Œæ‹’ç»çŠ¶æ€éƒ½æ˜¯å·²ç¡®å®šçš„çŠ¶æ€ï¼‰æ— è®ºæ˜¯å“ªç§æƒ…å†µéƒ½å¯ä»¥é€šè¿‡æ·»åŠ å¤„ç†å™¨æ¥è¡¨æ˜è¯¥ Promise çš„çŠ¶æ€å·²ç¡®å®šã€‚</li>
<li><code>then()</code>æ–¹æ³•å¯ä»¥ç”¨äºåˆ†é…å±¥è¡Œå¤„ç†å™¨å’Œæ‹’ç»å¤„ç†å™¨ï¼Œ<code>catch()</code> æ–¹æ³•å¯ç”¨äºåˆ†é…æ‹’ç»å¤„ç†å™¨ã€‚<code>finally()</code>æ–¹æ³•å¯ç”¨äºåˆ†é…è§£å†³å¤„ç†å™¨ã€‚æ— è®ºæ“ä½œç»“æœæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œè§£å†³å¤„ç†å™¨<code>(finally)</code>éƒ½ä¼šè¢«è°ƒç”¨ã€‚</li>
<li>å› ä¸ºæ‰€æœ‰çš„ Promise å¤„ç†å™¨éƒ½æ˜¯è¢«ä½œä¸º<strong>å¾®ä»»åŠ¡</strong>æ¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ä»–ä»¬åœ¨å½“å‰è„šæœ¬å·¥ä½œå®Œæˆä¹‹å‰ä¸ä¼šæ‰§è¡Œã€‚</li>
<li>ä½ å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºå¤„äºæœªç¡®å®šçŠ¶æ€çš„ Promise å¯¹è±¡ï¼Œè¯¥æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªæ‰§è¡Œå™¨å‡½æ•°ï¼ˆExecutorï¼‰ä½œä¸ºå…¶å”¯ä¸€çš„å‚æ•°ã€‚æ‰§è¡Œå™¨å‡½æ•°è¢«ä¼ å…¥<code>resolve</code>å’Œ<code>reject</code>ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ç”¨ä»¥è¡¨æ˜ Promise æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚</li>
<li><strong>æ‰§è¡Œå™¨åœ¨åˆ›å»º Promise æ—¶ç«‹å³æ‰§è¡Œ</strong>ã€‚è¿™ä¸è¢«ä½œä¸ºå¾®ä»»åŠ¡è¿è¡Œçš„å¤„ç†å™¨ä¸åŒï¼Œæ‰§è¡Œå™¨æŠ›å‡ºçš„ä»»ä½•é”™è¯¯éƒ½ä¼šè¢«è‡ªåŠ¨æ•è·å¹¶ä¼ é€’ç»™ rejectã€‚</li>
<li>å¯ä»¥ä½¿ç”¨ <code>Promise.resolve()</code> æ¥åˆ›å»ºå¤„äºå±¥è¡ŒçŠ¶æ€çš„ Promiseï¼Œæˆ–ä½¿ç”¨ <code>Promise.reject()</code> æ¥åˆ›å»ºå¤„äºæ‹’ç»çŠ¶æ€çš„ Promiseã€‚ è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šæŠŠä¼ å…¥çš„å‚æ•°åŒ…è£¹åœ¨ Promise ä¸­(å¦‚æœè¯¥å‚æ•°ä¸æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªé Promise çš„ thenable å¯¹è±¡)ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼Œæˆ–å°†åŸæ¥çš„ Promise å¯¹è±¡åŸæ ·ä¼ é€’ã€‚å½“ä½ ä¸ç¡®å®šæŸå¯¹è±¡æ˜¯å¦æ˜¯ Promiseï¼Œä½†åˆå¸Œæœ›å®ƒè¡¨ç°å¾—åƒ Promise æ—¶ï¼Œè¿™äº›æ–¹æ³•å¾ˆæœ‰å¸®åŠ©ã€‚</li>
</ul>

                    
                </div>

                

                <div class="post-bottom-tags-and-share border-box">
                    <div>
                        
                            <ul class="post-tags-box border-box">
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/JavaScript/">JavaScript</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/Promise/">Promise</a>
                                    </li>
                                
                            </ul>
                        
                    </div>
                    <div>
                        
                            <div class="post-share-container border-box">
    <ul class="share-list-wrap border-box">
        <li class="qq share-item border-box flex-center tooltip"
            data-tooltip-content="åˆ†äº«åˆ° QQ"
        >
            <i class="fa-brands fa-qq"></i>
        </li>
        <li class="wechat share-item border-box flex-center tooltip tooltip-img"
            data-tooltip-content="åˆ†äº«åˆ°å¾®ä¿¡"
            data-tooltip-img-tip="å¾®ä¿¡æ‰«ä¸€æ‰«"
            data-tooltip-img-style="background-color: #fff; top: -10px; padding: 0.6rem 0.6rem 0.1rem 0.6rem;"
        >
            <i class="fa-brands fa-weixin"></i>
        </li>
        <li class="weibo share-item border-box flex-center tooltip"
            data-tooltip-content="åˆ†äº«åˆ°å¾®åš"
        >
            <i class="fa-brands fa-weibo"></i>
        </li>
    </ul>
</div>

                        
                    </div>
                </div>

                

                
                    <div class="post-nav border-box">
                        
                            <div class="prev-post">
                                <a class="prev"
                                   rel="prev"
                                   href="/2022/04/10/promise/series-02/"
                                   title="å…¨é¢ç†è§£ Promise ç³»åˆ—ï¼ˆäºŒ)ï¼šé“¾å¼ Promise"
                                >
                                    <span class="left arrow-icon flex-center">
                                        <i class="fas fa-chevron-left"></i>
                                    </span>
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">å…¨é¢ç†è§£ Promise ç³»åˆ—ï¼ˆäºŒ)ï¼šé“¾å¼ Promise</span>
                                        <span class="post-nav-item">ä¸Šä¸€ç¯‡</span>
                                    </span>
                                </a>
                            </div>
                        
                        
                            <div class="next-post">
                                <a class="next"
                                   rel="next"
                                   href="/2022/03/20/basic-git-usage/"
                                   title="å¸¸ç”¨çš„ git å‘½ä»¤æ¸…å•"
                                >
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">å¸¸ç”¨çš„ git å‘½ä»¤æ¸…å•</span>
                                        <span class="post-nav-item">ä¸‹ä¸€ç¯‡</span>
                                    </span>
                                    <span class="right arrow-icon flex-center">
                                        <i class="fas fa-chevron-right"></i>
                                    </span>
                                </a>
                            </div>
                        
                    </div>
                

                
                    






                
            </div>
        </div>

        
            <div class="pc-post-toc right-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-Promise-%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-text">1.1 Promise çš„ç”Ÿå‘½å‘¨æœŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-1-%E7%94%A8-then-%E5%88%86%E9%85%8D%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-text">1.1.1 ç”¨ then() åˆ†é…å¤„ç†å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-2-%E7%94%A8-catch-%E5%88%86%E9%85%8D%E6%8B%92%E7%BB%9D%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-text">1.1.2 ç”¨ catch() åˆ†é…æ‹’ç»å¤„ç†å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-3-%E7%94%A8-finally-%E5%88%86%E9%85%8D%E8%A7%A3%E5%86%B3%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-text">1.1.3 ç”¨ finally() åˆ†é…è§£å†³å¤„ç†å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-4-%E4%B8%BA%E5%B7%B2%E7%A1%AE%E5%AE%9A%E7%9A%84-Promise-%E5%88%86%E9%85%8D%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-text">1.1.4 ä¸ºå·²ç¡®å®šçš„ Promise åˆ†é…å¤„ç†å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-5-%E5%A4%84%E7%90%86%E5%99%A8%E5%92%8C%E5%BE%AE%E4%BB%BB%E5%8A%A1"><span class="nav-text">1.1.5 å¤„ç†å™¨å’Œå¾®ä»»åŠ¡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-%E5%88%9B%E5%BB%BA%E6%9C%AA%E8%A7%A3%E5%86%B3%E7%9A%84-Promise"><span class="nav-text">1.2 åˆ›å»ºæœªè§£å†³çš„ Promise</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-%E5%88%9B%E5%BB%BA%E5%B7%B2%E8%A7%A3%E5%86%B3%E7%9A%84-Promise"><span class="nav-text">1.3 åˆ›å»ºå·²è§£å†³çš„ Promise</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-1-%E4%BD%BF%E7%94%A8-Promise-resolve"><span class="nav-text">1.3.1 ä½¿ç”¨ Promise.resolve()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-2-%E4%BD%BF%E7%94%A8-Promise-reject"><span class="nav-text">1.3.2 ä½¿ç”¨ Promise.reject()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-3-%E9%9D%9E-Promise-%E7%9A%84-thenable-%E5%AF%B9%E8%B1%A1"><span class="nav-text">1.3.3 é Promise çš„ thenable å¯¹è±¡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-%E5%B0%8F%E7%BB%93"><span class="nav-text">1.4 å°ç»“</span></a></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                
            </div>
        </div>

        <div class="page-main-content-bottom border-box">
            
<footer class="footer border-box">
    <div class="copyright-info info-item">
    &copy;&nbsp;<span>2021</span>&nbsp;-&nbsp;2024
    
            &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">å°ä¸¾</a>
        
    </div>

    <div class="theme-info info-item">
        ç”±&nbsp;<a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;é©±åŠ¨&nbsp;&&nbsp;ä¸»é¢˜&nbsp;<a class="keep-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep</a>
    </div>

    

    

    
</footer>

        </div>
    </div>

    <!-- post tools -->
    
        <div class="post-tools right-toc">
            <div class="post-tools-container border-box">
    <ul class="post-tools-list border-box">
        <!-- PC encrypt again -->
        

        <!-- PC TOC show toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- PC go comment -->
        

        <!-- PC full screen -->
        <li class="tools-item flex-center full-screen">
            <i class="fa-solid fa-expand"></i>
        </li>
    </ul>
</div>

        </div>
    

    <!-- side tools -->
    <div class="side-tools">
        <div class="side-tools-container border-box ">
    <ul class="side-tools-list side-tools-show-handle border-box">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <!-- toggle mode -->
        
            <li class="tools-item tool-toggle-theme-mode flex-center">
                <i class="fas fa-moon"></i>
            </li>
        

        <!-- rss -->
        
            <li class="tools-item rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                    <i class="fas fa-rss"></i>
                </a>
            </li>
        

        <!-- to bottom -->
        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list border-box">
        
            <li class="tools-item toggle-show-toc-tablet flex-center">
                <i class="fas fa-list"></i>
            </li>
        

        

        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

        <li class="tools-item tool-scroll-to-top flex-center show-arrow">
            <i class="arrow fas fa-arrow-up"></i>
            <span class="percent"></span>
        </li>
    </ul>
</div>

    </div>

    <!-- image mask -->
    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    <!-- local search -->
    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="æœç´¢..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

    <!-- tablet toc -->
    
        <div class="tablet-post-toc-mask">
            <div class="tablet-post-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-Promise-%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-text">1.1 Promise çš„ç”Ÿå‘½å‘¨æœŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-1-%E7%94%A8-then-%E5%88%86%E9%85%8D%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-text">1.1.1 ç”¨ then() åˆ†é…å¤„ç†å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-2-%E7%94%A8-catch-%E5%88%86%E9%85%8D%E6%8B%92%E7%BB%9D%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-text">1.1.2 ç”¨ catch() åˆ†é…æ‹’ç»å¤„ç†å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-3-%E7%94%A8-finally-%E5%88%86%E9%85%8D%E8%A7%A3%E5%86%B3%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-text">1.1.3 ç”¨ finally() åˆ†é…è§£å†³å¤„ç†å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-4-%E4%B8%BA%E5%B7%B2%E7%A1%AE%E5%AE%9A%E7%9A%84-Promise-%E5%88%86%E9%85%8D%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-text">1.1.4 ä¸ºå·²ç¡®å®šçš„ Promise åˆ†é…å¤„ç†å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-5-%E5%A4%84%E7%90%86%E5%99%A8%E5%92%8C%E5%BE%AE%E4%BB%BB%E5%8A%A1"><span class="nav-text">1.1.5 å¤„ç†å™¨å’Œå¾®ä»»åŠ¡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-%E5%88%9B%E5%BB%BA%E6%9C%AA%E8%A7%A3%E5%86%B3%E7%9A%84-Promise"><span class="nav-text">1.2 åˆ›å»ºæœªè§£å†³çš„ Promise</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-%E5%88%9B%E5%BB%BA%E5%B7%B2%E8%A7%A3%E5%86%B3%E7%9A%84-Promise"><span class="nav-text">1.3 åˆ›å»ºå·²è§£å†³çš„ Promise</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-1-%E4%BD%BF%E7%94%A8-Promise-resolve"><span class="nav-text">1.3.1 ä½¿ç”¨ Promise.resolve()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-2-%E4%BD%BF%E7%94%A8-Promise-reject"><span class="nav-text">1.3.2 ä½¿ç”¨ Promise.reject()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-3-%E9%9D%9E-Promise-%E7%9A%84-thenable-%E5%AF%B9%E8%B1%A1"><span class="nav-text">1.3.3 é Promise çš„ thenable å¯¹è±¡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-%E5%B0%8F%E7%BB%93"><span class="nav-text">1.4 å°ç»“</span></a></li></ol>
    </div>
</div>

            </div>
        </div>
    
</main>





<!-- common js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/utils.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/header-shrink.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/back2top.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/toggle-theme.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/code-block.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/main.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/libs/anime.min.js"></script>

<!-- local search -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/local-search.min.js"></script>


<!-- lazyload -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/lazyload.min.js"></script>


<div class="pjax">
    <!-- home page -->
    

    <!-- post page -->
    
        <!-- post-helper -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/post/post-helper.min.js"></script>

        <!-- toc -->
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/post/toc.min.js"></script>
        

        <!-- copyright-info -->
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/post/copyright-info.min.js"></script>
        

        <!-- share -->
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/post/share.min.js"></script>
        
    

    <!-- categories page -->
    

    <!-- links page -->
    

    <!-- photos page -->
    

    <!-- tools page -->
    
</div>

<!-- mermaid -->


<!-- pjax -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-keep/4.2.5/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart()
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd()
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'))
            KEEP.initExecute()
        });
    });
</script>




    
        
    

</body>
</html>
